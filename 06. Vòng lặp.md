# Câu lệnh lặp trong C++

## 1. Giới thiệu

- Câu lệnh lặp (loop) cho phép thực hiện một khối lệnh nhiều lần dựa trên điều kiện hoặc số lần lặp xác định.
- Dùng lặp khi cần xử lý các thao tác lặp lại: tính tổng, duyệt số, sinh dãy, in bảng cửu chương, v.v.

---

## 2. Khi nào dùng từng loại vòng lặp
- Dùng `for` khi biết trước số lần lặp (đếm được).
- Dùng `while` khi lặp dựa trên điều kiện và có thể không biết trước số lần.
- Dùng `do-while` khi cần thực hiện khối lệnh ít nhất một lần rồi mới kiểm tra điều kiện.

---

## 3. Vòng lặp for

Cú pháp:
```cpp
for (khởi_tạo; điều_kiện; bước_tăng_giảm) {
    // khối lệnh
}
```

Ví dụ in các số từ 1 đến n:
```cpp
#include <iostream>
using namespace std;

int main() {
    int n;
    cout << "Nhap n: ";
    cin >> n;
    for (int i = 1; i <= n; ++i) {
        cout << i << " ";
    }
    cout << endl;
    return 0;
}
```

Ghi chú:
- Phần khởi tạo thường là biến đếm (ví dụ `int i = 0`).
- Điều kiện được kiểm tra trước mỗi lần lặp.
- `++i` hoặc `i++` đều hợp lệ; với kiểu int hiệu năng không khác nhau đáng kể.

---

## 4. Vòng lặp while

Cú pháp:
```cpp
while (điều_kiện) {
    // khối lệnh
}
```

Ví dụ tính tổng các số nhập đến khi gặp 0:
```cpp
#include <iostream>
using namespace std;

int main() {
    int x;
    int sum = 0;
    cout << "Nhap cac so (0 de ket thuc):" << endl;
    cin >> x;
    while (x != 0) {
        sum += x;
        cin >> x;
    }
    cout << "Tong: " << sum << endl;
    return 0;
}
```

Ghi chú:
- Có thể không chạy lần nào nếu điều kiện ban đầu sai.

---

## 5. Vòng lặp do-while

Cú pháp:
```cpp
do {
    // khối lệnh
} while (điều_kiện);
```

Ví dụ menu thực hiện ít nhất một lần:
```cpp
#include <iostream>
using namespace std;

int main() {
    int choice;
    do {
        cout << "1. Chuc nang A\n2. Thoat\nChon: ";
        cin >> choice;
        if (choice == 1) cout << "Ban chon A\n";
    } while (choice != 2);
    return 0;
}
```

Ghi chú:
- Khối lệnh luôn chạy ít nhất một lần trước khi kiểm tra điều kiện.

---

## 6. break và continue

- `break;` — thoát ngay lập tức khỏi vòng lặp chứa nó.
- `continue;` — bỏ qua phần còn lại của vòng lặp hiện tại và chuyển sang lần lặp tiếp theo (kiểm tra điều kiện/ bước tăng).

Ví dụ tìm số đầu tiên chia hết cho 7:
```cpp
for (int i = 1; i <= 100; ++i) {
    if (i % 7 == 0) {
        cout << "Tim duoc: " << i << endl;
        break;
    }
}
```

Ví dụ in các số lẻ (bỏ qua số chẵn):
```cpp
for (int i = 1; i <= 10; ++i) {
    if (i % 2 == 0) continue;
    cout << i << " ";
}
```

Lưu ý:
- Dùng `break`/`continue` hợp lý để code rõ ràng; tránh lạm dụng gây khó đọc.

---

## 7. Vòng lặp lồng nhau (nested loops)

- Vòng lặp bên trong chạy đủ tất cả lần lặp cho mỗi lần lặp của vòng ngoài.
- Thường dùng để in ma trận, bảng cửu chương, xử lý cặp giá trị.

Ví dụ in bảng cửu chương 1..5:
```cpp
for (int i = 1; i <= 5; ++i) {
    for (int j = 1; j <= 5; ++j) {
        cout << i * j << "\t";
    }
    cout << endl;
}
```

Chú ý về độ phức tạp:
- Nếu vòng ngoài chạy N lần và vòng trong chạy M lần, tổng số lần thực thi ~ N * M.

---

## 8. Một số lỗi thường gặp và lưu ý

- Off-by-one: lỗi lặp thiếu hoặc thừa 1 (ví dụ `i <= n` vs `i < n`).
- Vòng lặp vô hạn: do điều kiện luôn đúng hoặc biến điều khiển không thay đổi.
  - Ví dụ vô hạn: `while (true) { /* nếu không break thì vô hạn */ }`
- Không dùng biến chưa khởi tạo trong điều kiện/khối lặp.
- Tránh thay đổi biến điều khiển theo cách phức tạp khiến khó hiểu.
- Luôn dùng dấu ngoặc `{}` ngay cả khi chỉ một câu lệnh để tránh nhầm lẫn.

---

## 9. Ví dụ thực tế (một số bài mẫu)

1) Tính tổng 1 + 2 + ... + n
```cpp
int sum = 0;
for (int i = 1; i <= n; ++i) sum += i;
```

2) Tính giai thừa (không dùng đệ quy)
```cpp
long long fact = 1;
for (int i = 2; i <= n; ++i) fact *= i;
```

3) Kiểm tra số nguyên tố (dùng vòng lặp)
```cpp
bool isPrime = true;
if (n < 2) isPrime = false;
else {
    for (int i = 2; i*i <= n; ++i) {
        if (n % i == 0) {
            isPrime = false;
            break;
        }
    }
}
```

4) In các chữ số của một số từ cuối về đầu (dùng while):
```cpp
int x = 12345;
while (x > 0) {
    int digit = x % 10;
    cout << digit;
    x /= 10;
}
```

---

## 10. Thực hành — Bài tập (đề nghị)

1. Nhập n, in các số từ 1 đến n (dùng for).
2. Nhập n, tính S = 1 + 2 + ... + n (dùng for).
3. Nhập n, in các số chẵn từ 2 đến n (dùng for và continue).
4. Nhập một chuỗi số nguyên liên tiếp cách nhau bằng cách nhập nhiều số (kết thúc bằng 0). Tính tổng các số đã nhập (dùng while).
5. Nhập n, tính n! (giai thừa) bằng vòng lặp (ưu tiên long long).
6. Kiểm tra n có phải số nguyên tố hay không (dùng for và break).
7. Nhập hai số a, b (a ≤ b). In tất cả số nguyên trong khoảng từ a đến b (dùng for).
8. Tính lũy thừa a^b (a, b là số nguyên không âm) bằng vòng lặp.
9. In bảng cửu chương từ 1 đến 10 (dùng nested for).
10. Viết chương trình lặp nhập mật khẩu (tối đa 3 lần) — nếu đúng thì thông báo "Dang nhap thanh cong", nếu hết lần thì in "Khong cho phep".

---

## 11. Tổng kết

- Nắm vững 3 cấu trúc lặp: `for`, `while`, `do-while`.
- Chọn loại vòng lặp phù hợp: `for` cho lặp theo số lần, `while` cho lặp theo điều kiện, `do-while` khi cần chạy ít nhất một lần.
- Hiểu `break` và `continue` để điều khiển luồng lặp.
- Thực hành nhiều bài tập để tránh lỗi logic như off-by-one và vòng lặp vô hạn.

---